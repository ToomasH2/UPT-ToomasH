{"ast":null,"code":"var _jsxFileName = \"/Users/toomasherodes/frb/src/components/peamineLeht.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { signOut } from \"firebase/auth\";\nimport { auth, db } from \"../firebase-config\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Reminder } from \"../elements/remind\";\nimport { onValue, ref } from \"firebase/database\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PeamineLeht() {\n  _s();\n\n  const navigate = useNavigate();\n  const [meeldetuletused, setMeeldetuletused] = useState([]);\n  const [kasutaja, setKasutaja] = useState(\"\");\n  useEffect(() => {\n    auth.onAuthStateChanged(user => {\n      setKasutaja(user.email);\n\n      if (user) {\n        onValue(ref(db, `/${auth.currentUser.uid}`), snapshot => {\n          const data = snapshot.val();\n          setMeeldetuletused([]);\n\n          if (data != null) {\n            console.log(data);\n            Object.values(data).map(meeldetuletus => {\n              setMeeldetuletused(oldArray => [...oldArray, meeldetuletus]);\n            });\n          }\n        });\n      }\n\n      if (!user) {\n        navigate(\"/\");\n      }\n    });\n  }, []);\n\n  const logiValja = () => {\n    signOut(auth).then(navigate(\"/\")).catch(err => {\n      alert(err.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\" Tere, \", kasutaja, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(Reminder, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 35\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logiValja,\n      children: \"Logi valja \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), meeldetuletused.map(yks => {\n      /*#__PURE__*/\n      _jsxDEV(\"h1\", {\n        children: yks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PeamineLeht, \"TjH4BTwqLaf/XxjfQzkisgfvfwo=\", false, function () {\n  return [useNavigate];\n});\n\n_c = PeamineLeht;\n\nvar _c;\n\n$RefreshReg$(_c, \"PeamineLeht\");","map":{"version":3,"names":["React","useEffect","useState","signOut","auth","db","useNavigate","Reminder","onValue","ref","PeamineLeht","navigate","meeldetuletused","setMeeldetuletused","kasutaja","setKasutaja","onAuthStateChanged","user","email","currentUser","uid","snapshot","data","val","console","log","Object","values","map","meeldetuletus","oldArray","logiValja","then","catch","err","alert","message","yks"],"sources":["/Users/toomasherodes/frb/src/components/peamineLeht.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { signOut } from \"firebase/auth\";\nimport { auth, db } from \"../firebase-config\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Reminder } from \"../elements/remind\";\nimport { onValue, ref } from \"firebase/database\";\n\nexport default function PeamineLeht() {\n  const navigate = useNavigate();\n  const [meeldetuletused, setMeeldetuletused] = useState([]);\n  const [kasutaja, setKasutaja] = useState(\"\");\n\n  useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      setKasutaja(user.email);\n      if (user) {\n        onValue(ref(db, `/${auth.currentUser.uid}`), (snapshot) => {\n          const data = snapshot.val();\n          setMeeldetuletused([]);\n          if (data != null) {\n            console.log(data);\n            Object.values(data).map((meeldetuletus) => {\n              setMeeldetuletused((oldArray) => [...oldArray, meeldetuletus]);\n            });\n          }\n        });\n      }\n\n      if (!user) {\n        navigate(\"/\");\n      }\n    });\n  }, []);\n\n  const logiValja = () => {\n    signOut(auth)\n      .then(navigate(\"/\"))\n      .catch((err) => {\n        alert(err.message);\n      });\n  };\n  return (\n    <div>\n      <h1> Tere, {kasutaja}!</h1> <Reminder />\n      <button onClick={logiValja}>Logi valja </button>\n      {meeldetuletused.map((yks) => {\n        <h1>{yks}</h1>;\n      })}\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,eAAxB;AACA,SAASC,IAAT,EAAeC,EAAf,QAAyB,oBAAzB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,OAAT,EAAkBC,GAAlB,QAA6B,mBAA7B;;AAEA,eAAe,SAASC,WAAT,GAAuB;EAAA;;EACpC,MAAMC,QAAQ,GAAGL,WAAW,EAA5B;EACA,MAAM,CAACM,eAAD,EAAkBC,kBAAlB,IAAwCX,QAAQ,CAAC,EAAD,CAAtD;EACA,MAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;EAEAD,SAAS,CAAC,MAAM;IACdG,IAAI,CAACY,kBAAL,CAAyBC,IAAD,IAAU;MAChCF,WAAW,CAACE,IAAI,CAACC,KAAN,CAAX;;MACA,IAAID,IAAJ,EAAU;QACRT,OAAO,CAACC,GAAG,CAACJ,EAAD,EAAM,IAAGD,IAAI,CAACe,WAAL,CAAiBC,GAAI,EAA9B,CAAJ,EAAuCC,QAAD,IAAc;UACzD,MAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;UACAV,kBAAkB,CAAC,EAAD,CAAlB;;UACA,IAAIS,IAAI,IAAI,IAAZ,EAAkB;YAChBE,OAAO,CAACC,GAAR,CAAYH,IAAZ;YACAI,MAAM,CAACC,MAAP,CAAcL,IAAd,EAAoBM,GAApB,CAAyBC,aAAD,IAAmB;cACzChB,kBAAkB,CAAEiB,QAAD,IAAc,CAAC,GAAGA,QAAJ,EAAcD,aAAd,CAAf,CAAlB;YACD,CAFD;UAGD;QACF,CATM,CAAP;MAUD;;MAED,IAAI,CAACZ,IAAL,EAAW;QACTN,QAAQ,CAAC,GAAD,CAAR;MACD;IACF,CAlBD;EAmBD,CApBQ,EAoBN,EApBM,CAAT;;EAsBA,MAAMoB,SAAS,GAAG,MAAM;IACtB5B,OAAO,CAACC,IAAD,CAAP,CACG4B,IADH,CACQrB,QAAQ,CAAC,GAAD,CADhB,EAEGsB,KAFH,CAEUC,GAAD,IAAS;MACdC,KAAK,CAACD,GAAG,CAACE,OAAL,CAAL;IACD,CAJH;EAKD,CAND;;EAOA,oBACE;IAAA,wBACE;MAAA,sBAAYtB,QAAZ;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,oBAC8B,QAAC,QAAD;MAAA;MAAA;MAAA;IAAA,QAD9B,eAEE;MAAQ,OAAO,EAAEiB,SAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,EAGGnB,eAAe,CAACgB,GAAhB,CAAqBS,GAAD,IAAS;MAC5B;MAAA;QAAA,UAAKA;MAAL;QAAA;QAAA;QAAA;MAAA;IACD,CAFA,CAHH;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AASD;;GA3CuB3B,W;UACLJ,W;;;KADKI,W"},"metadata":{},"sourceType":"module"}