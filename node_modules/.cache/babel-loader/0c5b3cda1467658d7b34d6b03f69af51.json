{"ast":null,"code":"import _toConsumableArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{signOut}from\"firebase/auth\";import{auth,db}from\"../firebase-config\";import{useNavigate}from\"react-router-dom\";import{Reminder}from\"../elements/remind\";import{onValue,ref,remove}from\"firebase/database\";import\"../styles/peamineLeht.css\";import{Form}from\"react-bootstrap\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function PeamineLeht(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meeldetuletused=_useState2[0],setMeeldetuletused=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),kasutaja=_useState4[0],setKasutaja=_useState4[1];useEffect(function(){auth.onAuthStateChanged(function(user){setKasutaja(user.email);if(user){onValue(ref(db,\"/\".concat(auth.currentUser.uid)),function(snapshot){var data=snapshot.val();setMeeldetuletused([]);if(data!=null){Object.values(data).map(function(meeldetuletus){setMeeldetuletused(function(oldArray){return[].concat(_toConsumableArray(oldArray),[meeldetuletus]);});});}});}if(!user){navigate(\"/\");}});},[]);var logiValja=function logiValja(){signOut(auth).then(navigate(\"/\")).catch(function(err){alert(err.message);});};var kustuta=function kustuta(todo){remove(ref(db,\"/\".concat(auth.currentUser.uid,\"/\").concat(todo.uidd)));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" Tere, \",kasutaja,\"!\"]}),/*#__PURE__*/_jsx(Reminder,{}),meeldetuletused.map(function(yks){return/*#__PURE__*/_jsxs(\"div\",{className:\"meeldetuletus\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pealkiri\",children:yks.title}),/*#__PURE__*/_jsx(\"p\",{children:yks.reminder}),/*#__PURE__*/_jsx(\"p\",{children:yks.kp}),/*#__PURE__*/_jsx(Form,{children:yks.alam.map(function(alam,i){return/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:i,value:i}),alam,/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return kustuta(yks);},children:\"Kustuta\"})]});}),/*#__PURE__*/_jsx(\"button\",{onClick:logiValja,children:\"Logi valja \"})]});}","map":{"version":3,"names":["React","useEffect","useState","signOut","auth","db","useNavigate","Reminder","onValue","ref","remove","Form","PeamineLeht","navigate","meeldetuletused","setMeeldetuletused","kasutaja","setKasutaja","onAuthStateChanged","user","email","currentUser","uid","snapshot","data","val","Object","values","map","meeldetuletus","oldArray","logiValja","then","catch","err","alert","message","kustuta","todo","uidd","yks","title","reminder","kp","alam","i"],"sources":["/Users/toomasherodes/frb/src/components/peamineLeht.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { signOut } from \"firebase/auth\";\nimport { auth, db } from \"../firebase-config\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Reminder } from \"../elements/remind\";\nimport { onValue, ref, remove } from \"firebase/database\";\nimport \"../styles/peamineLeht.css\";\nimport { Form } from \"react-bootstrap\";\n\nexport default function PeamineLeht() {\n  const navigate = useNavigate();\n  const [meeldetuletused, setMeeldetuletused] = useState([]);\n  const [kasutaja, setKasutaja] = useState(\"\");\n\n  useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      setKasutaja(user.email);\n      if (user) {\n        onValue(ref(db, `/${auth.currentUser.uid}`), (snapshot) => {\n          const data = snapshot.val();\n          setMeeldetuletused([]);\n          if (data != null) {\n            Object.values(data).map((meeldetuletus) => {\n              setMeeldetuletused((oldArray) => [...oldArray, meeldetuletus]);\n            });\n          }\n        });\n      }\n\n      if (!user) {\n        navigate(\"/\");\n      }\n    });\n  }, []);\n\n  const logiValja = () => {\n    signOut(auth)\n      .then(navigate(\"/\"))\n      .catch((err) => {\n        alert(err.message);\n      });\n  };\n\n  const kustuta = (todo) => {\n    remove(ref(db, `/${auth.currentUser.uid}/${todo.uidd}`));\n  };\n  return (\n    <div>\n      <h1> Tere, {kasutaja}!</h1>\n      <Reminder />\n      {meeldetuletused.map((yks) => (\n        <div className=\"meeldetuletus\">\n          <h1 className=\"pealkiri\">{yks.title}</h1>\n          <p>{yks.reminder}</p>\n          <p>{yks.kp}</p>\n          <Form>\n            {yks.alam.map((alam, i) => (\n              <label>\n                <input type=\"checkbox\" id={i} value={i} />\n                {alam}\n                <br />\n              </label>\n            ))}\n          </Form>\n          <button onClick={() => kustuta(yks)}>Kustuta</button>\n        </div>\n      ))}\n      <button onClick={logiValja}>Logi valja </button>\n    </div>\n  );\n}\n"],"mappings":"oOAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,IAAT,CAAeC,EAAf,KAAyB,oBAAzB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,OAASC,OAAT,CAAkBC,GAAlB,CAAuBC,MAAvB,KAAqC,mBAArC,CACA,MAAO,2BAAP,CACA,OAASC,IAAT,KAAqB,iBAArB,C,wFAEA,cAAe,SAASC,YAAT,EAAuB,CACpC,GAAMC,SAAQ,CAAGP,WAAW,EAA5B,CACA,cAA8CJ,QAAQ,CAAC,EAAD,CAAtD,wCAAOY,eAAP,eAAwBC,kBAAxB,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eAEAhB,SAAS,CAAC,UAAM,CACdG,IAAI,CAACc,kBAAL,CAAwB,SAACC,IAAD,CAAU,CAChCF,WAAW,CAACE,IAAI,CAACC,KAAN,CAAX,CACA,GAAID,IAAJ,CAAU,CACRX,OAAO,CAACC,GAAG,CAACJ,EAAD,YAASD,IAAI,CAACiB,WAAL,CAAiBC,GAA1B,EAAJ,CAAsC,SAACC,QAAD,CAAc,CACzD,GAAMC,KAAI,CAAGD,QAAQ,CAACE,GAAT,EAAb,CACAV,kBAAkB,CAAC,EAAD,CAAlB,CACA,GAAIS,IAAI,EAAI,IAAZ,CAAkB,CAChBE,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoBI,GAApB,CAAwB,SAACC,aAAD,CAAmB,CACzCd,kBAAkB,CAAC,SAACe,QAAD,qCAAkBA,QAAlB,GAA4BD,aAA5B,IAAD,CAAlB,CACD,CAFD,EAGD,CACF,CARM,CAAP,CASD,CAED,GAAI,CAACV,IAAL,CAAW,CACTN,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CAjBD,EAkBD,CAnBQ,CAmBN,EAnBM,CAAT,CAqBA,GAAMkB,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtB5B,OAAO,CAACC,IAAD,CAAP,CACG4B,IADH,CACQnB,QAAQ,CAAC,GAAD,CADhB,EAEGoB,KAFH,CAES,SAACC,GAAD,CAAS,CACdC,KAAK,CAACD,GAAG,CAACE,OAAL,CAAL,CACD,CAJH,EAKD,CAND,CAQA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,IAAD,CAAU,CACxB5B,MAAM,CAACD,GAAG,CAACJ,EAAD,YAASD,IAAI,CAACiB,WAAL,CAAiBC,GAA1B,aAAiCgB,IAAI,CAACC,IAAtC,EAAJ,CAAN,CACD,CAFD,CAGA,mBACE,oCACE,gCAAYvB,QAAZ,OADF,cAEE,KAAC,QAAD,IAFF,CAGGF,eAAe,CAACc,GAAhB,CAAoB,SAACY,GAAD,qBACnB,aAAK,SAAS,CAAC,eAAf,wBACE,WAAI,SAAS,CAAC,UAAd,UAA0BA,GAAG,CAACC,KAA9B,EADF,cAEE,mBAAID,GAAG,CAACE,QAAR,EAFF,cAGE,mBAAIF,GAAG,CAACG,EAAR,EAHF,cAIE,KAAC,IAAD,WACGH,GAAG,CAACI,IAAJ,CAAShB,GAAT,CAAa,SAACgB,IAAD,CAAOC,CAAP,qBACZ,sCACE,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAEA,CAA3B,CAA8B,KAAK,CAAEA,CAArC,EADF,CAEGD,IAFH,cAGE,aAHF,GADY,EAAb,CADH,EAJF,cAaE,eAAQ,OAAO,CAAE,yBAAMP,QAAO,CAACG,GAAD,CAAb,EAAjB,qBAbF,GADmB,EAApB,CAHH,cAoBE,eAAQ,OAAO,CAAET,SAAjB,yBApBF,GADF,CAwBD"},"metadata":{},"sourceType":"module"}