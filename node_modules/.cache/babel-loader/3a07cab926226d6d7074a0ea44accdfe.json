{"ast":null,"code":"import _toConsumableArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{auth,db}from\"../firebase-config\";import{onValue,ref,remove}from\"firebase/database\";import\"../styles/peamineLeht.css\";import{useNavigate}from\"react-router-dom\";import\"../styles/isiklik.css\";import{Button}from\"react-bootstrap\";import{signOut}from\"firebase/auth\";import{MyNavbar}from\"../elements/navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Isiklik(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meeldetuletused=_useState2[0],setMeeldetuletused=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),kasutaja=_useState4[0],setKasutaja=_useState4[1];useEffect(function(){auth.onAuthStateChanged(function(user){setKasutaja(user.displayName);console.log(user);if(user){onValue(ref(db,\"/\".concat(auth.currentUser.uid)),function(snapshot){var data=snapshot.val();setMeeldetuletused([]);if(data!=null){Object.values(data).map(function(meeldetuletus){setMeeldetuletused(function(oldArray){return[].concat(_toConsumableArray(oldArray),[meeldetuletus]);});});}});}});if(!auth.currentUser.uid){console.log(kasutaja);navigate(\"/login\");}},[]);var logiValja=function logiValja(){signOut(auth).then(navigate(\"/login\")).catch(function(err){alert(err.message);});};var navig=function navig(){navigate(\"/peamineleht\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex flex-column align-items-center\",children:[/*#__PURE__*/_jsx(MyNavbar,{kasutaja:kasutaja}),/*#__PURE__*/_jsxs(\"div\",{className:\"tervitus p-3 m-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"m-3\",children:[\"Tere, \",kasutaja,\"!\"]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Sul on \"}),/*#__PURE__*/_jsxs(\"h2\",{children:[meeldetuletused.length,\" \"]}),meeldetuletused.length==1?/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"h3\",{children:\"aktiivne eesm\\xE4rk.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"h3\",{children:\"aktiivset eesm\\xE4rki.\"})]}),/*#__PURE__*/_jsx(Button,{onClick:navig,variant:\"success\",className:\"w-25 mt-5\",size:\"lg\",active:true,children:\"Vaata\"}),\" \",/*#__PURE__*/_jsx(Button,{onClick:logiValja,variant:\"outline-dark\",className:\" m-3\",size:\"sm\",children:\"Logi v\\xE4lja\"}),\" \"]})]});}","map":{"version":3,"names":["React","useEffect","useState","auth","db","onValue","ref","remove","useNavigate","Button","signOut","MyNavbar","Isiklik","navigate","meeldetuletused","setMeeldetuletused","kasutaja","setKasutaja","onAuthStateChanged","user","displayName","console","log","currentUser","uid","snapshot","data","val","Object","values","map","meeldetuletus","oldArray","logiValja","then","catch","err","alert","message","navig","length"],"sources":["/Users/toomasherodes/frb/src/components/isiklik.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../firebase-config\";\nimport { onValue, ref, remove } from \"firebase/database\";\nimport \"../styles/peamineLeht.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../styles/isiklik.css\";\nimport { Button } from \"react-bootstrap\";\nimport { signOut } from \"firebase/auth\";\nimport { MyNavbar } from \"../elements/navbar\";\n\nexport default function Isiklik() {\n  const navigate = useNavigate();\n  const [meeldetuletused, setMeeldetuletused] = useState([]);\n  const [kasutaja, setKasutaja] = useState(\"\");\n\n  useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      setKasutaja(user.displayName);\n      console.log(user);\n      if (user) {\n        onValue(ref(db, `/${auth.currentUser.uid}`), (snapshot) => {\n          const data = snapshot.val();\n          setMeeldetuletused([]);\n          if (data != null) {\n            Object.values(data).map((meeldetuletus) => {\n              setMeeldetuletused((oldArray) => [...oldArray, meeldetuletus]);\n            });\n          }\n        });\n      }\n    });\n    if (!auth.currentUser.uid) {\n      console.log(kasutaja);\n      navigate(\"/login\");\n    }\n  }, []);\n\n  const logiValja = () => {\n    signOut(auth)\n      .then(navigate(\"/login\"))\n      .catch((err) => {\n        alert(err.message);\n      });\n  };\n\n  const navig = () => {\n    navigate(\"/peamineleht\");\n  };\n\n  return (\n    <div className=\"w-100 d-flex flex-column align-items-center\">\n      <MyNavbar kasutaja={kasutaja} />\n\n      <div className=\"tervitus p-3 m-3\">\n        <h1 className=\"m-3\">Tere, {kasutaja}!</h1>\n        <h3>Sul on </h3>\n        <h2>{meeldetuletused.length} </h2>\n        {meeldetuletused.length == 1 ? (\n          <>\n            {\" \"}\n            <h3>aktiivne eesmärk.</h3>\n          </>\n        ) : (\n          <>\n            {\" \"}\n            <h3>aktiivset eesmärki.</h3>\n          </>\n        )}\n        <Button\n          onClick={navig}\n          variant=\"success\"\n          className=\"w-25 mt-5\"\n          size=\"lg\"\n          active\n        >\n          Vaata\n        </Button>{\" \"}\n        <Button\n          onClick={logiValja}\n          variant=\"outline-dark\"\n          className=\" m-3\"\n          size=\"sm\"\n        >\n          Logi välja\n        </Button>{\" \"}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"oOAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,EAAf,KAAyB,oBAAzB,CACA,OAASC,OAAT,CAAkBC,GAAlB,CAAuBC,MAAvB,KAAqC,mBAArC,CACA,MAAO,2BAAP,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAO,uBAAP,CACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,QAAT,KAAyB,oBAAzB,C,6IAEA,cAAe,SAASC,QAAT,EAAmB,CAChC,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,cAA8CN,QAAQ,CAAC,EAAD,CAAtD,wCAAOY,eAAP,eAAwBC,kBAAxB,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eAEAhB,SAAS,CAAC,UAAM,CACdE,IAAI,CAACe,kBAAL,CAAwB,SAACC,IAAD,CAAU,CAChCF,WAAW,CAACE,IAAI,CAACC,WAAN,CAAX,CACAC,OAAO,CAACC,GAAR,CAAYH,IAAZ,EACA,GAAIA,IAAJ,CAAU,CACRd,OAAO,CAACC,GAAG,CAACF,EAAD,YAASD,IAAI,CAACoB,WAAL,CAAiBC,GAA1B,EAAJ,CAAsC,SAACC,QAAD,CAAc,CACzD,GAAMC,KAAI,CAAGD,QAAQ,CAACE,GAAT,EAAb,CACAZ,kBAAkB,CAAC,EAAD,CAAlB,CACA,GAAIW,IAAI,EAAI,IAAZ,CAAkB,CAChBE,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoBI,GAApB,CAAwB,SAACC,aAAD,CAAmB,CACzChB,kBAAkB,CAAC,SAACiB,QAAD,qCAAkBA,QAAlB,GAA4BD,aAA5B,IAAD,CAAlB,CACD,CAFD,EAGD,CACF,CARM,CAAP,CASD,CACF,CAdD,EAeA,GAAI,CAAC5B,IAAI,CAACoB,WAAL,CAAiBC,GAAtB,CAA2B,CACzBH,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACAH,QAAQ,CAAC,QAAD,CAAR,CACD,CACF,CApBQ,CAoBN,EApBM,CAAT,CAsBA,GAAMoB,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtBvB,OAAO,CAACP,IAAD,CAAP,CACG+B,IADH,CACQrB,QAAQ,CAAC,QAAD,CADhB,EAEGsB,KAFH,CAES,SAACC,GAAD,CAAS,CACdC,KAAK,CAACD,GAAG,CAACE,OAAL,CAAL,CACD,CAJH,EAKD,CAND,CAQA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAClB1B,QAAQ,CAAC,cAAD,CAAR,CACD,CAFD,CAIA,mBACE,aAAK,SAAS,CAAC,6CAAf,wBACE,KAAC,QAAD,EAAU,QAAQ,CAAEG,QAApB,EADF,cAGE,aAAK,SAAS,CAAC,kBAAf,wBACE,YAAI,SAAS,CAAC,KAAd,oBAA2BA,QAA3B,OADF,cAEE,+BAFF,cAGE,sBAAKF,eAAe,CAAC0B,MAArB,OAHF,CAIG1B,eAAe,CAAC0B,MAAhB,EAA0B,CAA1B,cACC,2BACG,GADH,cAEE,4CAFF,GADD,cAMC,2BACG,GADH,cAEE,8CAFF,GAVJ,cAeE,KAAC,MAAD,EACE,OAAO,CAAED,KADX,CAEE,OAAO,CAAC,SAFV,CAGE,SAAS,CAAC,WAHZ,CAIE,IAAI,CAAC,IAJP,CAKE,MAAM,KALR,mBAfF,CAuBY,GAvBZ,cAwBE,KAAC,MAAD,EACE,OAAO,CAAEN,SADX,CAEE,OAAO,CAAC,cAFV,CAGE,SAAS,CAAC,MAHZ,CAIE,IAAI,CAAC,IAJP,2BAxBF,CA+BY,GA/BZ,GAHF,GADF,CAuCD"},"metadata":{},"sourceType":"module"}