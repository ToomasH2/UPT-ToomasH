{"ast":null,"code":"import _objectSpread from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{signInWithEmailAndPassword,updateProfile,createUserWithEmailAndPassword}from\"firebase/auth\";import{auth}from\"../firebase-config.js\";import{useNavigate}from\"react-router-dom\";import\"../styles/tereTulemast.css\";import Container from\"react-bootstrap/Container\";import Button from\"react-bootstrap/Button\";import{Form}from\"react-bootstrap\";import\"bootstrap/dist/css/bootstrap.min.css\";import{MyNavbar}from\"../elements/navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function TereTulemast(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),registreerib=_useState6[0],setRegistreerib=_useState6[1];var navigate=useNavigate(false);var _useState7=useState({remail:\"\",confirmRemail:\"\",rpassword:\"\",confirmRpassword:\"\",eesnimi:\"\",perekonnanimi:\"\"}),_useState8=_slicedToArray(_useState7,2),regInfo=_useState8[0],setRegInfo=_useState8[1];/* useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        navigate(\"/isiklik\");\n      }\n    });\n  });*/var handleEmailChange=function handleEmailChange(e){setEmail(e.target.value);};var handlePasswordChange=function handlePasswordChange(e){setPassword(e.target.value);};var handleSignIn=function handleSignIn(){signInWithEmailAndPassword(auth,email,password).then(function(){navigate(\"/isiklik\");}).catch(function(err){return alert(err.message);});};var looKasutaja=function looKasutaja(){if(regInfo.remail!==regInfo.confirmRemail||regInfo.rpassword!==regInfo.confirmRpassword){alert(\"Viga e-maili v6i salas6na sisestamisel\");return;}createUserWithEmailAndPassword(auth,regInfo.remail,regInfo.rpassword).then(function(){var user=auth.currentUser;console.log(\"a\");console.log(user);console.log(regInfo.eesnimi);updateProfile(user,{displayName:regInfo.eesnimi}).then(function(){navigate(\"/isiklik\");});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex flex-column align-items-center\",children:[/*#__PURE__*/_jsx(MyNavbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\" loginkonteiner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"konteinerk\",children:registreerib?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"konteiner\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pealkiri\",children:\"Uue kasutaja registreerimine\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"nimed w-75 m-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-50 \",id:\"name\",placeholder:\"Eesnimi\",value:regInfo.eesnimi,onChange:function onChange(e){return setRegInfo(_objectSpread(_objectSpread({},regInfo),{},{eesnimi:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{className:\"w-50\",placeholder:\"Perekonnanimi\",value:regInfo.perekonnanimi,onChange:function onChange(e){return setRegInfo(_objectSpread(_objectSpread({},regInfo),{},{perekonnanimi:e.target.value}));}})]}),/*#__PURE__*/_jsx(\"input\",{className:\"emailReg w-75 m-1\",placeholder:\"E-mail\",value:regInfo.remail,onChange:function onChange(e){return setRegInfo(_objectSpread(_objectSpread({},regInfo),{},{remail:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{className:\"emailReg w-75 m-1\",placeholder:\"Korda E-maili\",value:regInfo.confirmRemail,onChange:function onChange(e){return setRegInfo(_objectSpread(_objectSpread({},regInfo),{},{confirmRemail:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{className:\"salas6naReg w-75 m-1\",placeholder:\"Vali salas\\xF5na\",type:\"password\",value:regInfo.rpassword,onChange:function onChange(e){return setRegInfo(_objectSpread(_objectSpread({},regInfo),{},{rpassword:e.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{className:\"salas6naReg w-75 m-1\",type:\"password\",placeholder:\"Korda salas\\xF5na\",value:regInfo.confirmRpassword,onChange:function onChange(e){return setRegInfo(_objectSpread(_objectSpread({},regInfo),{},{confirmRpassword:e.target.value}));}}),/*#__PURE__*/_jsxs(Button,{className:\" w-50 my-2\",onClick:looKasutaja,children:[\" \",\"Registreeri\",\" \"]}),/*#__PURE__*/_jsxs(\"a\",{className:\" my-1\",href:\"#\",onClick:function onClick(){return setRegistreerib(false);},children:[\"Logi sisse\",\" \"]})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{className:\" logiSisse\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Tere tulemast!\"}),/*#__PURE__*/_jsx(\"input\",{className:\"email w-75 \",placeholder:\"E-mail\",onChange:handleEmailChange,value:email}),/*#__PURE__*/_jsx(\"input\",{className:\"salas6na w-75 my-1\",placeholder:\"Salas\\xF5na\",type:\"password\",onChange:handlePasswordChange,value:password}),/*#__PURE__*/_jsx(Button,{className:\"sisselogimine w-75 my-3\",onClick:handleSignIn,children:\"Logi sisse\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(){return setRegistreerib(true);},children:\"Registreeri selle asemel kasutaja\"})})]})})})})]});}","map":{"version":3,"names":["React","useEffect","useState","signInWithEmailAndPassword","updateProfile","createUserWithEmailAndPassword","auth","useNavigate","Container","Button","Form","MyNavbar","TereTulemast","email","setEmail","password","setPassword","registreerib","setRegistreerib","navigate","remail","confirmRemail","rpassword","confirmRpassword","eesnimi","perekonnanimi","regInfo","setRegInfo","handleEmailChange","e","target","value","handlePasswordChange","handleSignIn","then","catch","err","alert","message","looKasutaja","user","currentUser","console","log","displayName"],"sources":["/Users/toomasherodes/frb/src/components/tereTulemast.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  signInWithEmailAndPassword,\n  updateProfile,\n  createUserWithEmailAndPassword,\n} from \"firebase/auth\";\nimport { auth } from \"../firebase-config.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../styles/tereTulemast.css\";\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"react-bootstrap/Button\";\nimport { Form } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { MyNavbar } from \"../elements/navbar\";\n\nexport default function TereTulemast() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [registreerib, setRegistreerib] = useState(false);\n  const navigate = useNavigate(false);\n  const [regInfo, setRegInfo] = useState({\n    remail: \"\",\n    confirmRemail: \"\",\n    rpassword: \"\",\n    confirmRpassword: \"\",\n    eesnimi: \"\",\n    perekonnanimi: \"\",\n  });\n\n  /* useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        navigate(\"/isiklik\");\n      }\n    });\n  });*/\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleSignIn = () => {\n    signInWithEmailAndPassword(auth, email, password)\n      .then(() => {\n        navigate(\"/isiklik\");\n      })\n      .catch((err) => alert(err.message));\n  };\n\n  const looKasutaja = () => {\n    if (\n      regInfo.remail !== regInfo.confirmRemail ||\n      regInfo.rpassword !== regInfo.confirmRpassword\n    ) {\n      alert(\"Viga e-maili v6i salas6na sisestamisel\");\n      return;\n    }\n\n    createUserWithEmailAndPassword(\n      auth,\n      regInfo.remail,\n      regInfo.rpassword\n    ).then(() => {\n      const user = auth.currentUser;\n      console.log(\"a\");\n      console.log(user);\n      console.log(regInfo.eesnimi);\n\n      updateProfile(user, {\n        displayName: regInfo.eesnimi,\n      }).then(() => {\n        navigate(\"/isiklik\");\n      });\n    });\n  };\n\n  return (\n    <div className=\"w-100 d-flex flex-column align-items-center\">\n      <MyNavbar />\n      <div className=\" loginkonteiner\">\n        <div className=\"konteinerk\">\n          {registreerib ? (\n            <>\n              <div className=\"konteiner\">\n                <h1 className=\"pealkiri\">Uue kasutaja registreerimine</h1>\n                <div className=\"nimed w-75 m-1\">\n                  <input\n                    className=\"w-50 \"\n                    id=\"name\"\n                    placeholder=\"Eesnimi\"\n                    value={regInfo.eesnimi}\n                    onChange={(e) =>\n                      setRegInfo({ ...regInfo, eesnimi: e.target.value })\n                    }\n                  />\n                  <input\n                    className=\"w-50\"\n                    placeholder=\"Perekonnanimi\"\n                    value={regInfo.perekonnanimi}\n                    onChange={(e) =>\n                      setRegInfo({ ...regInfo, perekonnanimi: e.target.value })\n                    }\n                  />\n                </div>\n                <input\n                  className=\"emailReg w-75 m-1\"\n                  placeholder=\"E-mail\"\n                  value={regInfo.remail}\n                  onChange={(e) =>\n                    setRegInfo({ ...regInfo, remail: e.target.value })\n                  }\n                />\n\n                <input\n                  className=\"emailReg w-75 m-1\"\n                  placeholder=\"Korda E-maili\"\n                  value={regInfo.confirmRemail}\n                  onChange={(e) =>\n                    setRegInfo({ ...regInfo, confirmRemail: e.target.value })\n                  }\n                />\n                <input\n                  className=\"salas6naReg w-75 m-1\"\n                  placeholder=\"Vali salasõna\"\n                  type=\"password\"\n                  value={regInfo.rpassword}\n                  onChange={(e) =>\n                    setRegInfo({ ...regInfo, rpassword: e.target.value })\n                  }\n                />\n                <input\n                  className=\"salas6naReg w-75 m-1\"\n                  type=\"password\"\n                  placeholder=\"Korda salasõna\"\n                  value={regInfo.confirmRpassword}\n                  onChange={(e) =>\n                    setRegInfo({ ...regInfo, confirmRpassword: e.target.value })\n                  }\n                />\n                <Button className=\" w-50 my-2\" onClick={looKasutaja}>\n                  {\" \"}\n                  Registreeri{\" \"}\n                </Button>\n                <a\n                  className=\" my-1\"\n                  href=\"#\"\n                  onClick={() => setRegistreerib(false)}\n                >\n                  Logi sisse{\" \"}\n                </a>\n              </div>\n            </>\n          ) : (\n            <>\n              <Container className=\" logiSisse\">\n                <h1 className=\"mb-3\">Tere tulemast!</h1>\n\n                <input\n                  className=\"email w-75 \"\n                  placeholder=\"E-mail\"\n                  onChange={handleEmailChange}\n                  value={email}\n                />\n                <input\n                  className=\"salas6na w-75 my-1\"\n                  placeholder=\"Salasõna\"\n                  type=\"password\"\n                  onChange={handlePasswordChange}\n                  value={password}\n                />\n                <Button\n                  className=\"sisselogimine w-75 my-3\"\n                  onClick={handleSignIn}\n                >\n                  Logi sisse\n                </Button>\n                <div>\n                  <a href=\"#\" onClick={() => setRegistreerib(true)}>\n                    Registreeri selle asemel kasutaja\n                  </a>\n                </div>\n              </Container>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}