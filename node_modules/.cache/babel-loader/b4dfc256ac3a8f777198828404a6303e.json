{"ast":null,"code":"import _toConsumableArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/toomasherodes/frb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{signOut}from\"firebase/auth\";import{auth,db}from\"../firebase-config\";import{useNavigate}from\"react-router-dom\";import{onValue,ref,remove,update}from\"firebase/database\";import\"../styles/peamineLeht.css\";import{Form,Card,Container,Col}from\"react-bootstrap\";import{Popup}from\"../elements/popup\";import{ProgressBar}from\"react-bootstrap\";import{Trash3Fill}from\"react-bootstrap-icons\";import{MyNavbar}from\"../elements/navbar\";import DateCountdown from\"react-date-countdown-timer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function PeamineLeht(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meeldetuletused=_useState2[0],setMeeldetuletused=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),kasutaja=_useState4[0],setKasutaja=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),olemas=_useState6[0],setOlemas=_useState6[1];useEffect(function(){auth.onAuthStateChanged(function(user){setKasutaja(user.displayName);if(user){onValue(ref(db,\"/\".concat(auth.currentUser.uid)),function(snapshot){var data=snapshot.val();setMeeldetuletused([]);if(data!=null){Object.values(data).map(function(meeldetuletus){setMeeldetuletused(function(oldArray){return[].concat(_toConsumableArray(oldArray),[meeldetuletus]);});});}});}if(!user){navigate(\"/login\");}});},[]);var taidetud=function taidetud(i,yks){var akk=yks.taidetud;akk[i]=!akk[i];update(ref(db,\"/\".concat(auth.currentUser.uid,\"/\").concat(yks.uidd)),{taidetud:akk,olemas:akk.filter(function(x){return x==true;}).length});};var kustuta=function kustuta(todo){remove(ref(db,\"/\".concat(auth.currentUser.uid,\"/\").concat(todo.uidd)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex flex-column align-items-center\",children:[/*#__PURE__*/_jsx(MyNavbar,{kasutaja:kasutaja}),/*#__PURE__*/_jsxs(\"div\",{fluid:true,className:\" konteineris\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"meeldetuletusteKonteineris\",children:meeldetuletused.map(function(yks,n){return/*#__PURE__*/_jsxs(\"div\",{className:\" meeldetuletuseKonteiner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"prygi\",children:[/*#__PURE__*/_jsx(\"h1\",{as:\"h3\",className:\"\",children:yks.title}),/*#__PURE__*/_jsx(Trash3Fill,{className:\"m-3\",onClick:function onClick(){return kustuta(yks);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-50 piir\",children:/*#__PURE__*/_jsx(\"p\",{children:yks.reminder})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-50\",children:/*#__PURE__*/_jsx(Form,{children:yks.alam.map(function(alam,i){return/*#__PURE__*/_jsx(\"div\",{id:i,className:\" m-1\",children:/*#__PURE__*/_jsxs(\"label\",{id:i,children:[/*#__PURE__*/_jsx(\"input\",{className:\"m-1\",type:\"checkbox\",id:i,checked:meeldetuletused[n].taidetud[i],onChange:function onChange(e){return taidetud(e.target.id,yks);}}),meeldetuletused[n].taidetud[i]?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"s\",{className:\"\",children:alam}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(_Fragment,{children:alam})]})},i);})})})]}),/*#__PURE__*/_jsx(\"p\",{children:yks.kp}),/*#__PURE__*/_jsx(ProgressBar,{variant:\"danger\",now:yks.olemas/yks.taidetud.length*100}),/*#__PURE__*/_jsxs(\"p\",{children:[yks.olemas,\"/\",yks.taidetud.length]})]},n);})}),/*#__PURE__*/_jsx(Container,{className:\"s\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"lisa\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Lisa uus\",/*#__PURE__*/_jsx(\"br\",{}),\"eesm\\xE4rk\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"w-75\",children:\"asdasd asdasd asdasd as asdasd asd asda asda\"}),/*#__PURE__*/_jsx(Popup,{className:\"nupp popup\"})]})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","signOut","auth","db","useNavigate","onValue","ref","remove","update","Form","Card","Container","Col","Popup","ProgressBar","Trash3Fill","MyNavbar","DateCountdown","PeamineLeht","navigate","meeldetuletused","setMeeldetuletused","kasutaja","setKasutaja","olemas","setOlemas","onAuthStateChanged","user","displayName","currentUser","uid","snapshot","data","val","Object","values","map","meeldetuletus","oldArray","taidetud","i","yks","akk","uidd","filter","x","length","kustuta","todo","n","title","reminder","alam","e","target","id","kp"],"sources":["/Users/toomasherodes/frb/src/components/peamineLeht.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { signOut } from \"firebase/auth\";\nimport { auth, db } from \"../firebase-config\";\nimport { useNavigate } from \"react-router-dom\";\nimport { onValue, ref, remove, update } from \"firebase/database\";\nimport \"../styles/peamineLeht.css\";\nimport { Form, Card, Container, Col } from \"react-bootstrap\";\nimport { Popup } from \"../elements/popup\";\nimport { ProgressBar } from \"react-bootstrap\";\nimport { Trash3Fill } from \"react-bootstrap-icons\";\nimport { MyNavbar } from \"../elements/navbar\";\nimport DateCountdown from \"react-date-countdown-timer\";\n\nexport default function PeamineLeht() {\n  const navigate = useNavigate();\n  const [meeldetuletused, setMeeldetuletused] = useState([]);\n  const [kasutaja, setKasutaja] = useState(\"\");\n  const [olemas, setOlemas] = useState(0);\n  useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      setKasutaja(user.displayName);\n      if (user) {\n        onValue(ref(db, `/${auth.currentUser.uid}`), (snapshot) => {\n          const data = snapshot.val();\n          setMeeldetuletused([]);\n          if (data != null) {\n            Object.values(data).map((meeldetuletus) => {\n              setMeeldetuletused((oldArray) => [...oldArray, meeldetuletus]);\n            });\n          }\n        });\n      }\n\n      if (!user) {\n        navigate(\"/login\");\n      }\n    });\n  }, []);\n\n  const taidetud = (i, yks) => {\n    const akk = yks.taidetud;\n    akk[i] = !akk[i];\n    update(ref(db, `/${auth.currentUser.uid}/${yks.uidd}`), {\n      taidetud: akk,\n      olemas: akk.filter((x) => x == true).length,\n    });\n  };\n\n  const kustuta = (todo) => {\n    remove(ref(db, `/${auth.currentUser.uid}/${todo.uidd}`));\n  };\n  return (\n    <div className=\"w-100 d-flex flex-column align-items-center\">\n      <MyNavbar kasutaja={kasutaja} />\n\n      <div fluid className=\" konteineris\">\n        <div className=\"meeldetuletusteKonteineris\">\n          {meeldetuletused.map((yks, n) => (\n            <div key={n} className=\" meeldetuletuseKonteiner\">\n              <div className=\"prygi\">\n                <h1 as=\"h3\" className=\"\">\n                  {yks.title}\n                </h1>\n                <Trash3Fill className=\"m-3\" onClick={() => kustuta(yks)} />\n              </div>\n              <div className=\"d-flex \">\n                <div className=\"w-50 piir\">\n                  <p>{yks.reminder}</p>\n                </div>\n                <div className=\"w-50\">\n                  <Form>\n                    {yks.alam.map((alam, i) => (\n                      <div id={i} key={i} className=\" m-1\">\n                        <label id={i}>\n                          <input\n                            className=\"m-1\"\n                            type=\"checkbox\"\n                            id={i}\n                            checked={meeldetuletused[n].taidetud[i]}\n                            onChange={(e) => taidetud(e.target.id, yks)}\n                          />\n                          {meeldetuletused[n].taidetud[i] ? (\n                            <>\n                              <s className=\"\">{alam}</s>\n                              <br />\n                            </>\n                          ) : (\n                            <>{alam}</>\n                          )}\n                        </label>\n                      </div>\n                    ))}\n                  </Form>\n                </div>\n              </div>\n              <p>{yks.kp}</p>\n              <ProgressBar\n                variant=\"danger\"\n                now={(yks.olemas / yks.taidetud.length) * 100}\n              />\n              <p>\n                {yks.olemas}/{yks.taidetud.length}\n              </p>\n            </div>\n          ))}\n        </div>\n        <Container className=\"s\">\n          <div className=\"lisa\">\n            <h2>\n              Lisa uus\n              <br />\n              eesm√§rk\n            </h2>\n\n            <p className=\"w-75\">asdasd asdasd asdasd as asdasd asd asda asda</p>\n            <Popup className=\"nupp popup\" />\n          </div>\n        </Container>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}